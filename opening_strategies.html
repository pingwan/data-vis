<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Data visualisation - Assignment 1</title>
  <link rel="stylesheet" href="/css/bootstrap/css/bootstrap.min.css">

  <style>

  .container{
  	width: 970px !important;
  }

    #map_container{
    	width: 450px; 
    	height: 450px;
    	padding: 0;
    	position: relative; 
  
    }
    #map{ 
    	width: 450px; 
    	height: 450px;
    }


  </style>

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="/css/colorbrewer.js" charset="utf-8"></script>
</head>
<body>

<div class="container" id="main-wrapper">
	<!-- row for title -->	
	<div class="row">
		<div class="col-xs-6">
			<h1>Opening strategies</h1>
		</div>
	</div>
	<!-- row for map and table -->
	<div class="row">
		<div class="col-xs-6">
			<div id="map_container">
				<img id="map" src="map.jpg">
				
			</div>
		</div>
	</div>
	

	<!-- row for legend and other statistics -->
	<div class="row">
		<div class="col-xs-6">
			other statistics here
		</div>
	</div>
</div>	<!-- end container div -->

</body>
<script>
	//draw initial svg
	var svg = d3.select("#map_container")
				.append("svg")
				.attr("height",450)
				.attr("width",450)
				.style("position","absolute").style("top",0).style("left",0);

	
function plot(){
		
		var xScale = d3.scale.linear()
					.domain([0,125])
					.range([0,450]);

		var yScale = d3.scale.linear()
					.domain([0,125])
					.range([450,0]);


		var colorScale = d3.scale.linear()
    				.domain([0.0,1.0])
    				.range(['blue', 'red']);

    d3.csv("openings_heatmap.csv",function(data){
    	//console.log(d3.csv.parseRows(data));
    	console.log(data);
    	var pixel = xScale(1);
		

		svg.selectAll('rect')
			.data(data)
			.enter()
			.append('rect')
			.attr("x", function(d) { return xScale(d.x); })
	        .attr("y", function(d) { return yScale(d.y); })
			.attr("width", pixel)
			.attr("height", pixel)
			.style("fill", function(d) { return colorScale(d.heat); });


		
	});
	
}

plot();

</script>
</html>